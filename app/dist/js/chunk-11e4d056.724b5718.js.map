{"version":3,"sources":["webpack:///./src/views/Editor.vue?82a7","webpack:///./src/components/LabelBind.vue?ae2a","webpack:///src/components/LabelBind.vue","webpack:///./src/components/LabelBind.vue?6b6e","webpack:///./src/components/LabelBind.vue","webpack:///src/views/Editor.vue","webpack:///./src/views/Editor.vue?1e3f","webpack:///./src/views/Editor.vue","webpack:///./src/services/label.js","webpack:///./src/components/LabelBind.vue?e04a","webpack:///./src/views/Editor.vue?e451","webpack:///./src/services/article.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","on","handleChangeTitle","activeLabels","onTagsSelected","slot","publishArticle","_v","_s","publishDescription","ref","contentPlaceholder","imgAdd","model","value","callback","$$v","content","expression","staticRenderFns","_l","item","key","id","effect","type","$event","onTagClick","label","newTag","handleInputChange","handleInputBlur","indexOf","_k","keyCode","handleInputConfirm","name","getAllLabels","tagsDescription","allTags","selectedIds","props","watch","data","$emit","console","log","val","setActiveLabels","methods","$message","warning","res","addLabel","ok","push","error","tag","splice","results","l","length","forEach","v","vv","e","target","component","components","LabelBind","articleId","getArticle","$route","params","label_ids","article","uploadAction","editArticle","addArticle","updateArticle","success","window","location","href","concat","labels","map","pos","file","upload","then","$refs","md","$img2Url","avatar","Label","par","url","post","get","Article","article_id","put","label_id","delete"],"mappings":"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","file":"js/chunk-11e4d056.724b5718.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-row',{staticClass:\"editor-title\"},[_c('a-col',{attrs:{\"span\":12}},[_c('a-input',{attrs:{\"value\":_vm.title,\"placeholder\":\"请输入文章标题\"},on:{\"change\":_vm.handleChangeTitle}})],1),_c('a-col',{attrs:{\"span\":1,\"offset\":9}},[_c('el-popover',{attrs:{\"placement\":\"bottom\",\"title\":\"标签\",\"trigger\":\"click\"}},[_c('LabelBind',{attrs:{\"activeLabels\":_vm.activeLabels},on:{\"onTagsSelected\":_vm.onTagsSelected}}),_c('a-button',{attrs:{\"slot\":\"reference\",\"icon\":\"tags\",\"shape\":\"circle\",\"type\":\"default\"},slot:\"reference\"})],1)],1),_c('a-col',{attrs:{\"span\":2}},[_c('a-button',{attrs:{\"icon\":\"check\",\"type\":\"primary\"},on:{\"click\":_vm.publishArticle}},[_vm._v(_vm._s(_vm.publishDescription))])],1)],1),_c('a-row',[_c('mavon-editor',{ref:\"md\",staticClass:\"editor-body\",attrs:{\"placeholder\":_vm.contentPlaceholder},on:{\"imgAdd\":_vm.imgAdd},model:{value:(_vm.content),callback:function ($$v) {_vm.content=$$v},expression:\"content\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"tag-group\"},_vm._l((_vm.allTags),function(item){return _c('a-tag',{key:item.id,staticClass:\"all-tags\",attrs:{\"color\":item.effect,\"type\":item.type},on:{\"click\":function($event){return _vm.onTagClick(item.id)}}},[_vm._v(_vm._s(item.label))])}),1),_c('div',{staticClass:\"tag-group\"},[_c('a-input',{staticClass:\"add-tag\",attrs:{\"placeholder\":\"添加标签\",\"type\":\"text\",\"size\":\"small\",\"value\":_vm.newTag},on:{\"change\":_vm.handleInputChange,\"blur\":_vm.handleInputBlur,\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm($event)}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"tag-group\">\r\n      <a-tag\r\n        class=\"all-tags\"\r\n        v-for=\"item in allTags\"\r\n        :key=\"item.id\"\r\n        :color=\"item.effect\"\r\n        @click=\"onTagClick(item.id)\"\r\n        :type=\"item.type\"\r\n      >{{ item.label }}</a-tag>\r\n    </div>\r\n    <div class=\"tag-group\">\r\n      <a-input\r\n        placeholder=\"添加标签\"\r\n        class=\"add-tag\"\r\n        type=\"text\"\r\n        size=\"small\"\r\n        :value=\"newTag\"\r\n        @change=\"handleInputChange\"\r\n        @blur=\"handleInputBlur\"\r\n        @keyup.enter=\"handleInputConfirm\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Label from \"@/services/label\";\r\n\r\nexport default {\r\n  name: \"LabelBind\",\r\n  async created() {\r\n    await this.getAllLabels();\r\n  },\r\n  data() {\r\n    return {\r\n      newTag: \"\",\r\n      tagsDescription: \"点击选择标签\",\r\n      allTags: [],\r\n      selectedIds: []\r\n    };\r\n  },\r\n  props: [\"activeLabels\"],\r\n  watch: {\r\n    selectedIds: function(data) {\r\n      this.$emit(\"onTagsSelected\", data);\r\n      console.log(this.selectedIds);\r\n    },\r\n    activeLabels: function(val) {\r\n      this.setActiveLabels(val);\r\n    }\r\n  },\r\n  methods: {\r\n    async handleInputBlur() {\r\n      this.newTag = \"\";\r\n    },\r\n    async handleInputConfirm() {\r\n      if (this.newTag === \"\") {\r\n        this.$message.warning(\"标签不能为空\");\r\n        return;\r\n      }\r\n      let res = await Label.addLabel(this.newTag);\r\n      if (res.ok) {\r\n        this.allTags.push({\r\n          id: res.data.id,\r\n          label: this.newTag,\r\n          effect: \"green\"\r\n        });\r\n        this.selectedIds.push(res.data.id);\r\n      } else {\r\n        this.$message.error(\"标签已存在\");\r\n      }\r\n    },\r\n    onTagClick(id) {\r\n      for (let tag of this.allTags) {\r\n        if (tag.id === id) {\r\n          if (tag.effect === \"\") {\r\n            tag.effect = \"green\";\r\n            this.selectedIds.push(tag.id);\r\n          } else {\r\n            tag.effect = \"\";\r\n            this.selectedIds.splice(this.selectedIds.indexOf(tag.id), 1);\r\n          }\r\n        }\r\n      }\r\n    },\r\n    async getAllLabels() {\r\n      let res = await Label.getAllLabels();\r\n      if (res.ok) {\r\n        let results = res.data.results;\r\n        for (let l of results) {\r\n          l.effect = \"\";\r\n        }\r\n        this.allTags = results;\r\n        this.tagsDescription = \"点击选择标签\";\r\n      } else {\r\n        this.tagsDescription = \"还没有创建标签呢\";\r\n      }\r\n    },\r\n    setActiveLabels(val) {\r\n      console.log(val);\r\n      if (this.activeLabels.length > 0) {\r\n        this.allTags.forEach(v => {\r\n          this.activeLabels.forEach(vv => {\r\n            if (vv === v.id) {\r\n              v.effect = \"dark\";\r\n            }\r\n          });\r\n        });\r\n        this.selectedIds = this.activeLabels;\r\n      }\r\n    },\r\n    handleInputChange(e) {\r\n      this.newTag = e.target.value;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.all-tags {\r\n  margin-left: 0.5rem;\r\n  margin-top: 0.5rem;\r\n  cursor: pointer;\r\n}\r\n\r\n.tagsDescription {\r\n  margin: 0.5rem;\r\n}\r\n\r\n.add-tag {\r\n  margin: 0.5rem;\r\n  width: auto;\r\n  vertical-align: bottom;\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./LabelBind.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./LabelBind.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LabelBind.vue?vue&type=template&id=9fcb6c12&scoped=true&\"\nimport script from \"./LabelBind.vue?vue&type=script&lang=js&\"\nexport * from \"./LabelBind.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LabelBind.vue?vue&type=style&index=0&id=9fcb6c12&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9fcb6c12\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <a-row class=\"editor-title\">\r\n      <a-col :span=\"12\">\r\n        <a-input @change=\"handleChangeTitle\" :value=\"title\" placeholder=\"请输入文章标题\" />\r\n      </a-col>\r\n      <a-col :span=\"1\" :offset=\"9\">\r\n        <el-popover placement=\"bottom\" title=\"标签\" trigger=\"click\">\r\n          <LabelBind :activeLabels=\"activeLabels\" @onTagsSelected=\"onTagsSelected\"></LabelBind>\r\n          <a-button slot=\"reference\" icon=\"tags\" shape=\"circle\" type=\"default\"></a-button>\r\n        </el-popover>\r\n      </a-col>\r\n      <a-col :span=\"2\">\r\n        <a-button icon=\"check\" type=\"primary\" @click=\"publishArticle\">{{publishDescription}}</a-button>\r\n      </a-col>\r\n    </a-row>\r\n    <a-row>\r\n      <mavon-editor\r\n        class=\"editor-body\"\r\n        v-model=\"content\"\r\n        @imgAdd=\"imgAdd\"\r\n        :placeholder=\"contentPlaceholder\"\r\n        ref=\"md\"\r\n      ></mavon-editor>\r\n    </a-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LabelBind from \"@/components/LabelBind\";\r\n// import { getQiniuToken, uploadImage } from \"@/services/qiniu\";\r\nimport Http from \"@/services/http\";\r\nimport Article from \"@/services/article\";\r\n// import config from \"@/common/config\";\r\n\r\nexport default {\r\n  name: \"Editor\",\r\n  components: { LabelBind },\r\n  async created() {\r\n    // await this.getQiniuToken();\r\n    if (this.articleId) {\r\n      await this.getArticle();\r\n      this.publishDescription = \"更新\";\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      articleId: this.$route.params.id,\r\n      content: \"\",\r\n      title: \"\",\r\n      label_ids: [],\r\n      contentPlaceholder: \"开始写作吧\",\r\n      // qiniuToken: \"\",\r\n      publishDescription: \"发布\",\r\n      article: null,\r\n      activeLabels: [],\r\n      uploadAction: \"/api/file/upload\",\r\n    };\r\n  },\r\n  methods: {\r\n    async publishArticle() {\r\n      console.log(\"publish article\");\r\n      if (this.title === \"\") {\r\n        this.$message.warning(\"标题不能为空\");\r\n        return;\r\n      }\r\n      if (this.content === \"\") {\r\n        this.$message.warning(\"内容不能为空\");\r\n        return;\r\n      }\r\n      if (this.articleId) {\r\n        await this.editArticle();\r\n      } else {\r\n        await this.addArticle();\r\n      }\r\n    },\r\n    async editArticle() {\r\n      let res = await Article.updateArticle(this.articleId, {\r\n        title: this.title,\r\n        content: this.content,\r\n        label_ids: this.label_ids\r\n      });\r\n      if (res.ok) {\r\n        this.$message.success(\"更新文章成功\");\r\n        window.location.href = \"/post/\".concat(this.articleId);\r\n      } else {\r\n        this.$message.error(\"更新文章出错\");\r\n      }\r\n    },\r\n    async addArticle() {\r\n      let res = await Article.addArticle({\r\n        title: this.title,\r\n        content: this.content,\r\n        label_ids: this.label_ids\r\n      });\r\n      if (res.ok) {\r\n        this.$message.success(\"发布文章成功\");\r\n        window.location.href = \"/post/\".concat(res.data.id);\r\n      } else {\r\n        this.$message.error(\"发布文章出错\");\r\n      }\r\n    },\r\n    // async getQiniuToken() {\r\n    //   let res = await getQiniuToken();\r\n    //   if (res.ok) {\r\n    //     this.qiniuToken = res.data.token;\r\n    //   }\r\n    // },\r\n    async getArticle() {\r\n      let res = await Article.getArticle(this.articleId);\r\n      if (res.ok) {\r\n        this.article = res.data;\r\n        this.title = this.article.title;\r\n        this.content = this.article.content;\r\n        this.activeLabels = this.article.labels\r\n          ? this.article.labels.map(v => v.id)\r\n          : [];\r\n        console.log(this.activeLabels);\r\n      }\r\n    },\r\n    onTagsSelected(data) {\r\n      this.label_ids = data;\r\n    },\r\n    async imgAdd(pos, file) {\r\n      // let res = await uploadImage(file, this.qiniuToken);\r\n      // if (res.ok) {\r\n      //   this.$refs.md.$img2Url(pos, config.qiniuUrl.concat(res.data.key));\r\n      // }\r\n      Http.upload(file, this.uploadAction).then(res => {\r\n        if (!res.ok) {\r\n          this.$message.error(\"上传失败\");\r\n          return;\r\n        }\r\n        this.$refs.md.$img2Url(\r\n          pos,\r\n          `${process.env.VUE_APP_SERVER}/${res.data.avatar}`\r\n        );\r\n      });\r\n    },\r\n    handleChangeTitle(e) {\r\n      this.title = e.target.value;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.editor-title {\r\n  margin: 12px;\r\n}\r\n\r\n.editor-body {\r\n  min-height: 500px;\r\n}\r\n</style>","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Editor.vue?vue&type=template&id=561e4c4f&\"\nimport script from \"./Editor.vue?vue&type=script&lang=js&\"\nexport * from \"./Editor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Editor.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Http from './http'\r\n\r\nexport default class Label {\r\n\r\n    static async addLabel(name) {\r\n        let par = { url: '/api/label', data: { label: name } }\r\n        return await Http.post(par)\r\n    }\r\n\r\n    static async getAllLabels() {\r\n        let par = { url: '/api/pub/labels' }\r\n        return await Http.get(par)\r\n    }\r\n}","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./LabelBind.vue?vue&type=style&index=0&id=9fcb6c12&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./LabelBind.vue?vue&type=style&index=0&id=9fcb6c12&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Editor.vue?vue&type=style&index=0&lang=css&\"","import Http from './http'\r\n\r\nexport default class Article {\r\n\r\n    static async addArticle(data) {\r\n        let par = { url: '/api/article', data: data }\r\n        return await Http.post(par)\r\n    }\r\n\r\n    static async updateArticle(article_id, data) {\r\n        let par = { url: '/api/article/'.concat(article_id), data: data }\r\n        return await Http.put(par)\r\n    }\r\n\r\n    static async getArticle(id) {\r\n        let par = { url: '/api/pub/article/'.concat(id) }\r\n        return await Http.get(par)\r\n    }\r\n\r\n    static async getArticleList(label_id) {\r\n        let par = null\r\n        if (label_id) {\r\n            par = { url: '/api/pub/articles/list', data: { label_id } }\r\n        } else {\r\n            par = { url: '/api/pub/articles/list' }\r\n        }\r\n        return await Http.get(par)\r\n    }\r\n\r\n    static async deleteArticle(articleId) {\r\n        return await Http.delete({\r\n            url: '/api/article/'.concat(articleId)\r\n        })\r\n    }\r\n\r\n    static async getArticleTimeline() {\r\n        return await Http.get({url:'/api/pub/articles/timeline'})\r\n    }\r\n\r\n    static async getHotArticles() {\r\n        return await Http.get({url: '/api/pub/articles/hot'})\r\n    }\r\n}\r\n"],"sourceRoot":""}