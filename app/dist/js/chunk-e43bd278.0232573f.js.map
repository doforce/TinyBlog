{"version":3,"sources":["webpack:///./src/common/config.js","webpack:///./src/views/Login.vue?f66a","webpack:///./src/common/constant.js","webpack:///src/views/Login.vue","webpack:///./src/views/Login.vue?0d85","webpack:///./src/views/Login.vue","webpack:///./src/views/Login.vue?d66d"],"names":["qiniuUrl","qiniuUploadUrl","emailPattern","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","user","directives","name","rawName","value","rules","pattern","message","expression","staticStyle","slot","on","submitAction","_v","_s","submitLabel","switchPage","switchLabel","staticRenderFns","Constant","TIPS_MAIL_WRONG","TIPS_REGISTER_DONE","TIPS_REGISTER_FAILED","TIPS_FORM_NOT_EMPTY","TIPS_LOGIN_FAILED","TIPS_USER_EXISTS","TIPS_USER_NOT_EXISTS","BUTTON_LOGIN","BUTTON_REGISTER","$form","createForm","config","registerPage","watch","param","methods","validateFields","err","values","registerAction","loginAction","email","password","image","avatar","then","res","ok","$message","warning","emailFormatOK","console","log","saveToken","token","data","expire","$router","push","path","component"],"mappings":"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","file":"js/chunk-e43bd278.0232573f.js","sourcesContent":["export default {\r\n    qiniuUrl: 'http://puh0vyh1l.bkt.clouddn.com/',\r\n    qiniuUploadUrl: 'http://up-z2.qiniu.com',\r\n    emailPattern: /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/,\r\n    // articleActions: [\r\n    //     { type: 'eye', text: val => val },\r\n    //     { type: 'message', text: val => val },\r\n    //     { type: 'calendar', text: val => val },\r\n    //     { type: 'edit', text: val => val },\r\n    //     { type: 'delete', text: val => val },\r\n    // ],\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"auth-group blog-center\"},[_c('a-form',{staticClass:\"form_login\",attrs:{\"form\":_vm.user}},[_c('a-form-item',[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['email' ,{ rules: [\n        {pattern: _vm.emailPattern , message: '邮箱格式错误' }] }]),expression:\"['email' ,{ rules: [\\n        {pattern: emailPattern , message: '邮箱格式错误' }] }]\"}],staticClass:\"item\",attrs:{\"placeholder\":\"请输入邮箱账号\"}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.25)\"},attrs:{\"slot\":\"prefix\",\"type\":\"global\"},slot:\"prefix\"})],1)],1),_c('a-form-item',[_c('a-input-password',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['password']),expression:\"['password']\"}],staticClass:\"item\",attrs:{\"placeholder\":\"请输入密码\"}},[_c('a-icon',{staticStyle:{\"color\":\"rgba(0,0,0,.25)\"},attrs:{\"slot\":\"prefix\",\"type\":\"lock\"},slot:\"prefix\"})],1)],1),_c('a-form-item',[_c('a-button',{staticClass:\"blog-btn-block\",attrs:{\"type\":\"primary\",\"block\":\"\"},on:{\"click\":_vm.submitAction}},[_vm._v(_vm._s(_vm.submitLabel))])],1),_c('a-form-item',[_vm._v(\" 或 \"),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":_vm.switchPage}},[_vm._v(_vm._s(_vm.switchLabel))])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const Constant = {\r\n    TIPS_MAIL_WRONG: '邮箱格式错误',\r\n    TIPS_REGISTER_DONE: '注册成功',\r\n    TIPS_REGISTER_FAILED: '注册失败',\r\n    TIPS_FORM_NOT_EMPTY: '表单不能为空',\r\n    TIPS_LOGIN_FAILED: '用户不存在或密码错误',\r\n    TIPS_USER_EXISTS: '用户已存在',\r\n    TIPS_USER_NOT_EXISTS: '用户不存在',\r\n\r\n    BUTTON_LOGIN: '登录',\r\n    BUTTON_REGISTER: '注册',\r\n};\r\n\r\nexport default Constant","<template>\n  <div class=\"auth-group blog-center\">\n    <a-form :form=\"user\" class=\"form_login\">\n      <a-form-item>\n        <a-input\n          placeholder=\"请输入邮箱账号\"\n          v-decorator=\"['email' ,{ rules: [\n          {pattern: emailPattern , message: '邮箱格式错误' }] }]\"\n          class=\"item\"\n        >\n          <a-icon slot=\"prefix\" type=\"global\" style=\"color: rgba(0,0,0,.25)\" />\n        </a-input>\n      </a-form-item>\n      <a-form-item>\n        <a-input-password placeholder=\"请输入密码\" v-decorator=\"['password']\" class=\"item\">\n          <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(0,0,0,.25)\" />\n        </a-input-password>\n      </a-form-item>\n      <a-form-item>\n        <a-button\n          @click=\"submitAction\"\n          class=\"blog-btn-block\"\n          type=\"primary\"\n          block\n        >{{ submitLabel }}</a-button>\n      </a-form-item>\n      <a-form-item>\n        或\n        <a-button @click=\"switchPage\" type=\"link\">{{ switchLabel }}</a-button>\n      </a-form-item>\n    </a-form>\n  </div>\n</template>\n\n<script>\nimport { register, login } from \"@/services/user\";\nimport Constant from \"@/common/constant\";\nimport { Token } from \"@/store\";\nimport config from \"@/common/config\";\nimport faker from \"faker\";\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      user: this.$form.createForm(this, { name: \"user\" }),\n      emailPattern: config.emailPattern,\n      registerPage: false,\n      switchLabel: Constant.BUTTON_REGISTER,\n      submitLabel: Constant.BUTTON_LOGIN\n    };\n  },\n  watch: {\n    registerPage: function(param) {\n      if (param) {\n        this.switchLabel = Constant.BUTTON_LOGIN;\n        this.submitLabel = Constant.BUTTON_REGISTER;\n      } else {\n        this.switchLabel = Constant.BUTTON_REGISTER;\n        this.submitLabel = Constant.BUTTON_LOGIN;\n      }\n    }\n  },\n  methods: {\n    submitAction() {\n      this.user.validateFields((err, values) => {\n        if (!err) {\n          if (this.registerPage) this.registerAction(values);\n          else this.loginAction(values);\n        }\n      });\n    },\n    registerAction(values) {\n      if (values.email && values.password) {\n        register(values.password, values.email, faker.image.avatar()).then(\n          res => {\n            if (res.ok) {\n              this.$message.warning(Constant.TIPS_REGISTER_DONE);\n              this.registerPage = false;\n            } else {\n              this.$message.warning(Constant.TIPS_REGISTER_FAILED);\n            }\n          }\n        );\n      } else {\n        if (this.emailFormatOK) {\n          this.$message.warning(Constant.TIPS_FORM_NOT_EMPTY);\n        } else {\n          this.$message.warning(Constant.TIPS_MAIL_WRONG);\n        }\n      }\n    },\n    loginAction(values) {\n      if (values.email && values.password) {\n        login(values.email, values.password).then(res => {\n          console.log(res);\n          if (res.ok) {\n            Token.saveToken({\n              token: res.data.token,\n              expire: res.data.expire\n            });\n            this.$router.push({ path: \"/admin\" });\n          } else {\n            this.$message.warning(Constant.TIPS_LOGIN_FAILED);\n          }\n        });\n      } else {\n        this.$message.warning(Constant.TIPS_FORM_NOT_EMPTY);\n      }\n    },\n\n    switchPage: function() {\n      this.registerPage = !this.registerPage;\n    }\n  }\n};\n</script>\n\n<style>\n.form_login {\n  width: 100%;\n  max-width: 330px;\n  padding: 15px;\n  margin: auto;\n}\n\n.auth-group {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  padding-top: 40px;\n  padding-bottom: 40px;\n}\n\n.pointer {\n  cursor: pointer;\n}\n\n.login-register {\n  margin-left: 14rem;\n  color: #409eff;\n  font-size: 1rem;\n}\n</style>\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=2f75a4cf&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.4.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}